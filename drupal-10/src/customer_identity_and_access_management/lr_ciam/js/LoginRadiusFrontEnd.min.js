function showOrHidePasswordlessTemplate(e){"false"===e||""===e?jQuery(".form-item-ciam-instant-link-login-email-template").hide():jQuery(".form-item-ciam-instant-link-login-email-template").show()}function showOrHidePasswordlessOTPTemplate(e){"false"===e||""===e?jQuery(".form-item-ciam-sms-template-one-time-passcode").hide():jQuery(".form-item-ciam-sms-template-one-time-passcode").show()}function showOrHideCustomRedirection(e){"0"===e||"1"===e||""===e?jQuery(".form-item-custom-login-url").hide():jQuery(".form-item-custom-login-url").show()}if(jQuery(document).ready(function(){jQuery("#lr-loading").click(function(){jQuery("#lr-loading").hide()}),window.addEventListener("pageshow",function(e){(e.persisted||void 0!==window.performance&&2===window.performance.navigation.type)&&window.location.reload()}),showOrHideCustomRedirection(jQuery('input:radio[name="login_redirection"]:checked').val()),jQuery('input:radio[name="login_redirection"]').change(function(){showOrHideCustomRedirection(jQuery(this).val())}),showOrHidePasswordlessTemplate(jQuery('input:radio[name="ciam_instant_link_login"]:checked').val()),jQuery('input:radio[name="ciam_instant_link_login"]').change(function(){showOrHidePasswordlessTemplate(jQuery(this).val())}),showOrHidePasswordlessOTPTemplate(jQuery('input:radio[name="ciam_instant_otp_login"]:checked').val()),jQuery('input:radio[name="ciam_instant_otp_login"]').change(function(){showOrHidePasswordlessOTPTemplate(jQuery(this).val())}),window.location.href==window.location.origin+domainName+"admin/people/create"?(jQuery(".form-item-mail label").attr("class","js-form-required form-required"),jQuery("#edit-mail").attr("required","required")):(jQuery("#edit-mail").attr("disabled","disabled"),jQuery("#edit-mail").attr("style","background:#ededed")),dropemailvalue="",jQuery(".removeEmail").each(function(){jQuery(this).click(function(){jQuery('form[name="loginradius-removeemail"]').remove();var e=jQuery(this).parents("tr");dropemailvalue=jQuery(this).parents("tr").find(".form-email").val(),showRemoveEmailPopup(e)})}),jQuery("#addEmail").attr("onClick","showAddEmailPopup()")}),"undefined"==typeof LoginRadiusV2){var e=document.createElement("script");e.src="https://auth.lrcontent2.com/v2/js/LoginRadiusV2.js",e.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(e)}var lrloadInterval=setInterval(function(){"undefined"!=typeof LoginRadiusV2&&(clearInterval(lrloadInterval),LRObject=new LoginRadiusV2(commonOptions))},1);function showRemoveEmailPopup(e){jQuery("#removeemail-form").show(),initializeRemoveEmailCiamForms(e)}function showAddEmailPopup(){jQuery("#addemail-form").show(),initializeAddEmailCiamForms()}function lrCloseRemovePopup(){jQuery('form[name="loginradius-removeemail"]').remove(),jQuery("#removeemail-form").hide()}function lrCloseAddEmailPopup(){jQuery("#addemail-form").hide()}function show_birthdate_date_block(){var e=(new Date).getFullYear(),o=e-100;jQuery("body").on?jQuery("body").on("focus",".loginradius-birthdate",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:o+":"+e})}):jQuery(".loginradius-birthdate").live("focus",function(){jQuery(".loginradius-birthdate").datepicker({dateFormat:"mm-dd-yy",maxDate:new Date,minDate:"-100y",changeMonth:!0,changeYear:!0,yearRange:o+":"+e})})}function handleResponse(e,o,n,i){i=i?"messages--"+i:"messages--status",e&&jQuery("form").each(function(){this.reset()}),null!=o&&""!=o?(jQuery("#lr-loading").hide(),jQuery(".messages").text(o),jQuery(".messages__wrapper").show(),jQuery(".messages").show(),jQuery(".messages").removeClass("messages--error messages--status showmsg"),jQuery(".messages").addClass(i),jQuery(".messages").addClass(n),""!=autoHideTime&&"0"!=autoHideTime&&setTimeout(fade_out,1e3*autoHideTime)):(jQuery(".messages__wrapper").hide(),jQuery(".messages").hide(),jQuery(".messages").text(""))}function showErrorMsgForOneClickSignIn(e,o){e&&jQuery("form").each(function(){this.reset()}),null!=o&&""!=o?(jQuery("#lr-loading").hide(),jQuery("div[data-drupal-messages-fallback]").text(o),jQuery("div[data-drupal-messages-fallback]").show(),jQuery("div[data-drupal-messages-fallback]").removeClass("oneclick--errormsg"),jQuery("div[data-drupal-messages-fallback]").addClass("oneclick--errormsg"),""!=autoHideTime&&"0"!=autoHideTime&&setTimeout(fade_out,1e3*autoHideTime)):(jQuery(".div[data-drupal-messages-fallback]").hide(),jQuery(".div[data-drupal-messages-fallback]").text(""))}function fade_out(){jQuery(".messages").hide()}var setButtonInterval=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(setButtonInterval),LRObject.$hooks.register("startProcess",function(){jQuery("#lr-loading").show()}),LRObject.$hooks.register("endProcess",function(){!0!==LRObject.options.twoFactorAuthentication&&!0!==LRObject.options.optionalTwoFactorAuthentication||jQuery("#authentication-container").show(),jQuery("#edit-account-phone").hide(),!0===LRObject.options.phoneLogin&&(jQuery("#updatephone-container").show(),jQuery("#edit-account-phone").show()),jQuery("#lr-loading").hide()}),LRObject.$hooks.call("setButtonsName",{removeemail:"Remove"}),LRObject.registrationFormSchema=registrationSchema,LRObject.$hooks.register("socialLoginFormRender",function(){jQuery("#lr-loading").hide(),jQuery("#social-registration-form").show(),show_birthdate_date_block()}),LRObject.$hooks.register("afterFormRender",function(e){"socialRegistration"==e&&jQuery("#login-container").find("form[name=loginradius-socialRegistration]").parent().addClass("socialRegistration"),"updatePhone"==e&&""==phoneId&&jQuery("#updatephone-container").find("#loginradius-submit-update").attr("value","Add"),"removeemail"==e&&jQuery("#loginradius-removeemail-emailid").val(dropemailvalue)}))},1);function getBackupCodes(){var e=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(e),LRObject.api.getBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var o=0;o<e.BackUpCodes.length;o++){var n="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),n+='<div class="form-item code-list" id="backup-codes-'+o+'-field">',n+='<span class="backupCode">'+e.BackUpCodes[o]+"</span>",n+="</div>",jQuery("#backupcode-table-body").append(n)}jQuery(".mybackupcopy").click(function(){setClipboard(jQuery(this).parent(".form-item").find("span").text())})},function(e){jQuery("#resettable").show()}))},1)}function resetBackupCodes(){var e=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(e),LRObject.api.resetBackupCode(accessToken,function(e){jQuery("#backupcode-table-body").empty();for(var o=0;o<e.BackUpCodes.length;o++){var n="";jQuery("#resettable").hide(),jQuery("#lr_ciam_reset_table").show(),n+='<div class="form-item code-list" id="backup-codes-'+o+'-field">',n+='<span class="backupCode">'+e.BackUpCodes[o]+"</span>",n+="</div>",jQuery("#backupcode-table-body").append(n)}jQuery(".mybackupcopy").click(function(){setClipboard(jQuery(this).parent(".form-item").find("span").text())})},function(e){}))},1)}function callSocialInterface(){var e={templateName:"loginradiuscustom_tmpl"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.customInterface(".interfacecontainerdiv",e))},1);jQuery("#lr-loading").hide()}function initializeSocialRegisterCiamForm(){var e={onSuccess:function(e){null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token),jQuery("#lr-loading").hide()):e.IsPosted&&(handleResponse(!0,commonOptions.messagesList.SOCIAL_LOGIN_MSG),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},onError:function(e){null!=e[0].Description&&(handleResponse(!1,e[0].Description,"","error"),jQuery("#social-registration-form").hide(),jQuery("#lr-loading").hide())},container:"social-registration-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("socialLogin",e))},1)}function initializeLoginCiamForm(){var e={onSuccess:function(e){1==e.IsPosted&&void 0!==e.access_token?0===jQuery("#loginradius-login-username").length&&0===jQuery("#loginradius-login-emailid").length||handleResponse(!0,commonOptions.messagesList.LOGIN_BY_EMAIL_MSG):void 0!==e.Data&&void 0!==e.Data.Sid?handleResponse(!0,commonOptions.messagesList.OTP_SEND_ON_PHONE_SUCCESS_MSG):void 0!==e.Data?handleResponse(!0,commonOptions.messagesList.EMAIL_VERIFICATION_SUCCESS_MSG):1==e.IsPosted?handleResponse(!0,commonOptions.messagesList.LOGIN_BY_EMAIL_MSG):e.access_token&&(handleResponse(!0),ciamRedirect(e.access_token))},onError:function(e){handleResponse(!1,e[0].Description,"","error")},container:"login-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("login",e))},1);jQuery("#lr-loading").hide()}function initializeRegisterCiamForm(){var e={onSuccess:function(e){var o="",n="";void 0!==LRObject.options.optionalEmailVerification&&(o=LRObject.options.optionalEmailVerification),void 0!==LRObject.options.disabledEmailVerification&&(n=LRObject.options.disabledEmailVerification),e.IsPosted&&null==e.Data?void 0!==o&&!0===o||void 0!==n&&!0===n||(handleResponse(!0,commonOptions.messagesList.REGISTRATION_SUCCESS_MSG),jQuery("html, body").animate({scrollTop:0},1e3)):null!=e.access_token&&""!=e.access_token?(handleResponse(!0,""),ciamRedirect(e.access_token)):e.IsPosted&&void 0!==e.Data&&null!==e.Data&&void 0!==e.Data.Sid?handleResponse(!0,commonOptions.messagesList.OTP_SEND_ON_PHONE_SUCCESS_MSG):1==LRObject.options.otpEmailVerification&&null==e.Data?handleResponse(!0,commonOptions.messagesList.VERIFICATION_OTP_SEND_ON_EMAIL_MSG):handleResponse(!0,commonOptions.messagesList.REGISTRATION_SUCCESS_MSG)},onError:function(e){null!=e[0].Description?handleResponse(!1,e[0].Description,"","error"):null!=e[0]&&handleResponse(!1,e[0],"","error"),jQuery("html, body").animate({scrollTop:0},1e3)},container:"registration-container"},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("registration",e))},1);jQuery("#lr-loading").hide()}function initializeResetPasswordCiamForm(e){var o=setInterval(function(){if("undefined"!=typeof LRObject){clearInterval(o);var n=LRObject.util.getQueryParameterByName("vtype");if(null!=n&&""!=n)if("reset"==n){var i={container:"resetpassword-container"};jQuery("#login-container").hide(),jQuery(".interfacecontainerdiv").hide(),jQuery(".page-title").text("Reset Password"),jQuery("#interfaceLabel").hide(),i.onSuccess=function(o){handleResponse(!0,e.messagesList.FORGOT_PASSWORD_SUCCESS_MSG),window.setTimeout(function(){window.location.replace(e.verificationUrl)},3e3)},i.onError=function(e){handleResponse(!1,e[0].Description,"","error")},LRObject.init("resetPassword",i)}else if("emailverification"==n){var t={onSuccess:function(o){void 0!==o&&(loggedIn||void 0===o.access_token||null==o.access_token||""==o.access_token?loggedIn||null==o.Data||null==o.Data.access_token||""==o.Data.access_token?(lrSetCookie("lr_message",e.messagesList.EMAIL_VERIFICATION_SUCCESS_MSG),window.location.href=window.location.href.split("?")[0]+"?lrresponse=true"):ciamRedirect(o.Data.access_token):ciamRedirect(o.access_token))},onError:function(e){lrSetCookie("lr_message",e[0].Description),window.location.href=window.location.href.split("?")[0]+"?lrresponse=false"}};LRObject.init("verifyEmail",t)}else if("oneclicksignin"==n){var a={onSuccess:function(e){ciamRedirect(e.access_token)},onError:function(e){loggedIn?window.location.href=homeDomain:showErrorMsgForOneClickSignIn(!1,e[0].Description)}};LRObject.init("instantLinkLogin",a)}}},1);jQuery("#lr-loading").hide()}function initializeForgotPasswordCiamForms(){var e={container:"forgotpassword-container",onSuccess:function(e){1==e.IsPosted&&void 0!==e.Data&&null!==e.Data?handleResponse(!0,commonOptions.messagesList.OTP_SEND_ON_PHONE_SUCCESS_MSG):1==LRObject.options.otpEmailVerification&&void 0===e.Data?handleResponse(!0,commonOptions.messagesList.VERIFICATION_OTP_SEND_ON_EMAIL_MSG):1==e.IsPosted&&"object"==typeof e.Data?jQuery('form[name="loginradius-resetpassword"]').length>0&&(handleResponse(!0,commonOptions.messagesList.FORGOT_PASSWORD_SUCCESS_MSG),window.setTimeout(function(){window.location.replace(commonOptions.verificationUrl)},3e3)):1==e.IsPosted&&void 0===e.Data&&(jQuery('form[name="loginradius-resetpassword"]').length>0?(handleResponse(!0,commonOptions.messagesList.FORGOT_PASSWORD_SUCCESS_MSG),window.setTimeout(function(){window.location.replace(commonOptions.verificationUrl)},3e3)):handleResponse(!0,commonOptions.messagesList.FORGOT_PASSWORD_MSG))},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){"undefined"!=typeof LRObject&&(clearInterval(o),LRObject.init("forgotPassword",e))},1);jQuery("#lr-loading").hide()}function initializeAccountLinkingCiamForms(){var e={container:"interfacecontainerdiv",templateName:"loginradiuscustom_tmpl_link",onSuccess:function(e){1!=e.IsPosted?(handleResponse(!0,""),ciamRedirect(e)):(handleResponse(!0,commonOptions.messagesList.ACCOUNT_LINKING_MSG,"showmsg"),window.setTimeout(function(){window.location.reload()},3e3))},onError:function(e){handleResponse(!1,e[0].Description,"showmsg","error")}},o={onSuccess:function(e){1==e.IsDeleted&&(handleResponse(!0,commonOptions.messagesList.ACCOUNT_UNLINKING_MSG,"showmsg"),window.setTimeout(function(){window.location.reload()},3e3))},onError:function(e){handleResponse(!1,e[0].Description,"showmsg","error")}},n=setInterval(function(){var i=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&i&&(clearInterval(n),LRObject.init("linkAccount",e),LRObject.init("unLinkAccount",o))},1);jQuery("#lr-loading").hide()}function initializeTwoFactorAuthenticator(){var e={container:"authentication-container",onSuccess:function(e){e.Sid&&handleResponse(!0,commonOptions.messagesList.OTP_SEND_ON_PHONE_SUCCESS_MSG),1==e.IsDeleted?(handleResponse(!0,commonOptions.messagesList.TWO_FA_DISABLED_MSG,"showmsg"),jQuery("html, body").animate({scrollTop:0},1e3),window.setTimeout(function(){window.location.reload()},3e3)):void 0!==e.Uid&&(handleResponse(!0,commonOptions.messagesList.TWO_FA_ENABLED_MSG,"showmsg"),jQuery("html, body").animate({scrollTop:0},1e3),window.setTimeout(function(){window.location.reload()},3e3))},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"showmsg","error")}},o=setInterval(function(){var n=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&n&&(clearInterval(o),LRObject.init("createTwoFactorAuthentication",e))},1)}function initializeProfileUpdate(){var e={container:"profileeditor-container",onSuccess:function(e){handleResponse(!0,commonOptions.messagesList.UPDATE_USER_PROFILE,"showmsg"),lrSetCookie("lr_profile_update","true"),window.location.href=window.location.href},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"showmsg","error")}},o=setInterval(function(){var n=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&n&&(clearInterval(o),LRObject.init("profileEditor",e))},1)}function initializePhoneUpdate(){var e={container:"updatephone-container",onSuccess:function(e){void 0!==e.Data?handleResponse(!0,commonOptions.messagesList.OTP_SEND_ON_PHONE_SUCCESS_MSG,"showmsg"):1==e.IsPosted&&(handleResponse(!0,commonOptions.messagesList.UPDATE_PHONE_SUCCESS_MSG,"showmsg"),window.setTimeout(function(){window.location.reload()},3e3))},onError:function(e){null!=e[0].Description&&handleResponse(!1,e[0].Description,"showmsg","error")}},o=setInterval(function(){var n=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&n&&(clearInterval(o),LRObject.init("updatePhone",e))},1)}function initializeAddEmailCiamForms(){var e={container:"addemail-container",onSuccess:function(e){jQuery("#addemail-form").hide(),handleResponse(!0,commonOptions.messagesList.ADD_EMAIL_MSG,"showmsg"),jQuery("html, body").animate({scrollTop:0},1e3)},onError:function(e){jQuery("#addemail-form").hide(),handleResponse(!1,e[0].Description,"showmsg","error"),jQuery("html, body").animate({scrollTop:0},1e3)}},o=setInterval(function(){var n=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&n&&(clearInterval(o),LRObject.init("addEmail",e),jQuery("#lr-loading").hide())},1)}function initializeRemoveEmailCiamForms(e){var o={container:"removeemail-container",onSuccess:function(o){jQuery("#removeemail-form").hide(),handleResponse(!0,commonOptions.messagesList.REMOVE_EMAIL_MSG,"showmsg"),e.remove(),jQuery("html, body").animate({scrollTop:0},1e3)},onError:function(e){jQuery("#removeemail-form").hide(),handleResponse(!1,e[0].Description,"showmsg","error"),jQuery("html, body").animate({scrollTop:0},1e3)}},n=setInterval(function(){var e=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&e&&(clearInterval(n),LRObject.init("removeEmail",o),jQuery("#lr-loading").hide())},1)}function initializeChangePasswordCiamForms(){var e={container:"changepassword-container",onSuccess:function(e){handleResponse(!0,commonOptions.messagesList.CHANGE_PASSWORD_SUCCESS_MSG)},onError:function(e){handleResponse(!1,e[0].Description,"","error")}},o=setInterval(function(){var n=LRObject.storage.getBrowserStorage("LRTokenKey");"undefined"!=typeof LRObject&&n&&(clearInterval(o),LRObject.init("changePassword",e),jQuery("#lr-loading").hide())},1)}function ciamRedirect(e,o){if(window.redirect)redirect(e,o);else{var n=o||"token",i=document.createElement("form");i.action=LocalDomain,i.method="POST";var t=document.createElement("input");t.type="hidden",t.value=e,t.name=n,i.appendChild(t),document.body.appendChild(i),i.submit()}}function setClipboard(){var e="";jQuery(".code-list").find("span").each(function(){e+=jQuery(this).html()+"\n"});var o=document.createElement("textarea");o.style="position: absolute; left: -1000px; top: -1000px",o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),jQuery(".copyMessage").show(),setTimeout(removeCodeCss,5e3)}function removeCodeCss(){jQuery(".code-list").find("span").removeAttr("style"),jQuery(".copyMessage").hide()}function changeIconColor(){jQuery(".code-list").find("span").css({"background-color":"#29d",color:"#fff"})}function lrSetCookie(e,o,n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var t="expires="+i.toUTCString();document.cookie=e+"="+o+";"+t+";path=/"}